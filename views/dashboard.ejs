<%- include('partials/header') %>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!--  Pie Chart -->
<script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['nutrient', 'value'],
          ['Protein',     11],
          ['Carb',      2],
          ['water',  2]
        ]);

        var options = {
          title: 'Percentage of nutrient intake',
          backgroundColor: 'lightgreen',
		  legend: {textStyle: {color: '#6B8C46'}},
		  titleTextStyle: {color: '#6B8C46'}
        };

        var chart1 = new google.visualization.PieChart(document.getElementById('piechart'));
        chart1.draw(data, options);
        
        var chart3 = new google.visualization.PieChart(document.getElementById('piechart3'));
        chart3.draw(data, options);
      }
    </script>

<!-- 	bar chart -->
<script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data1 = google.visualization.arrayToDataTable([ ['Date','Proteins'], <% user.datewise.forEach(function(datewise){ %> ['<%= datewise.date%>','<%= datewise.proteins %>'], <% }) %> ]);
														   
		var data2 = google.visualization.arrayToDataTable([ ['Date','Carbs'], <% user.datewise.forEach(function(datewise){ %> ['<%= datewise.date%>','<%= datewise.carbs%>'], <% }) %> ]);

		var data3 = google.visualization.arrayToDataTable([ ['Date','Fat'], <% user.datewise.forEach(function(datewise){ %> ['<%= datewise.date%>','<%= datewise.Fat %>'], <% }) %> ]);

        var options1 = {
          chart: {
            title: 'Proteins',
            
          }
        };
	   var options2 = {
          chart: {
            title: 'Carbs',
            
          }
        };
	   var options3 = {
          chart: {
            title: 'Fat',
            
          }
        };

        var chart1 = new google.charts.Bar(document.getElementById('columnchart1'));
		var chart2 = new google.charts.Bar(document.getElementById('columnchart2'));
		var chart3 = new google.charts.Bar(document.getElementById('columnchart3'));
        chart1.draw(data1, google.charts.Bar.convertOptions(options1));
		chart2.draw(data2, google.charts.Bar.convertOptions(options2));
		chart3.draw(data3, google.charts.Bar.convertOptions(options3));
      }
    </script>

</head>
<body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom navbar-light ">
            <li  class="navbar-brand pull-left "><img src="/imgs/foodt2.png" alt="logo"></li>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav ml-auto">
				
                <a class="nav-item nav-link navtext"  href="/<%= user._id%>"> Dashboard </a>
                <a class="nav-item nav-link navtext" href="/<%= user._id%>/details"> Details </a>
				<a class="nav-item nav-link navtext" href="/logout"> Logout </a>
                
              </div>
            </div>
          </nav>
    <section class="mx-0">
        <div class="container-fluid px-0">
                <div class="jumbotron jumbotron-fluid">
                    <div class="container text-center">
                      <h1 class="display-4"><%= user.calories%>/2000</h1>
                      <p class="lead">Current calorie count</p>
                    </div>
                </div>  
            
            
        </div>        
    </section>
    <section class="container-fluid px-0">
        <div class="row align-items-center content">
            <div class="col-md-6 order-2 order-md-1 " style="height: 100%">
                <div id="piechart1" style=" width: 100%"></div>
            </div>
            <div class="col-md-6 order-1 order-md-2  mb-5 mb-md-0">
                <div class="text-center">
                    <div class="row justify-content-center">
                        <div class="col-10 col-lg-8">
                           Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="row align-items-center content">
            <div class="col-md-6 order-2">
                <div id="piechart2" style="width: 100%"></div>

        <div class="row align-items-around justify-content-center">
            <div  class="col-lg-4" >
                <div id="columnchart1" style="width: 100%; height: 100%;"></div>
            </div>
			<div  class="col-lg-4 " >
                <div id="columnchart2" style="width: 100%; height: 100%;"></div>

            </div>
			<div  class="col-lg-4 " >
                <div id="columnchart3" style="width: 100%; height: 100%;"></div>
            </div>
            
        </div>
        
        <div class="row align-items-center content">
            <div class="col-md-6 order-2 blurb order-md-1">

                <div id="piechart3" style=" width: 100%"></div>
                <div id="piechart" style="100% width: 100%"></div>
            </div>
            <div class="col-md-6 order-1 order-md-2  mb-5 mb-md-0">
                <div class="text-center ">
                    <div class="row justify-content-center">
                        <div class="col-10 col-lg-8">
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- Add new food eaten  -->
        <form action="/<%= user._id%>" method="POST">
            <div class="form-group container">
                <label for="exampleFormControlTextarea1">Food Eaten: </label>
                <textarea class="form-control" name="food" id="exampleFormControlTextarea1" rows="3"></textarea>
				<button class="btn btn-primary">
					submit
				</button>
              </div>
            
        </form>
		<img src="https://d2eawub7utcl6.cloudfront.net/images/poweredby_nutritionix_api.png" border="0">
    </section>
    <script>
        $(function () {
            $(document).scroll(function () {
                var $nav = $("#mainNavbar");
                $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
            });
        });
    </script>

<%- include('partials/footer') %> 